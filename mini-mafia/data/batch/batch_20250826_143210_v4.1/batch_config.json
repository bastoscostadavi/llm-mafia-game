{
  "batch_id": "batch_20250826_143210_v4.1",
  "timestamp": "2025-08-26T14:32:10.968811",
  "prompt_config": {
    "version": "v4.1",
    "message_limit": 200,
    "templates": {
      "base_prompt": "[INST]\n#CONTEXT:\nYou're playing the following instance of the Mafia game. Your ultimate objective is to ensure your team wins, whether through persuasion, deduction, deception, or careful timing.\n\n\n#MAFIA GAME EXPLANATION\n\nOVERVIEW:\nMafia is a social deduction game of deception, logic, and hidden identities. Each player is secretly assigned to one of two opposing teams, but only the mafia know exactly who is on their side. The town must work together, using discussion, observation, and voting to identify and eliminate the mafia. Meanwhile, the mafia attempt to blend in, spread doubt, and mislead the town while secretly eliminating opponents at night. Every conversation, vote, and pause can carry meaning, and both teams must carefully balance truth and lies to secure victory. Over the course of alternating night and day phases, alliances form, suspicions grow, and the game builds toward a decisive end where only one side will prevail.\n\nTEAMS AND ROLES:\nThe game features two opposing teams: the informed mafia and the uninformed town.\n- Mafia: Mafiosos act together at night to eliminate members of the town. They know each other's identities from the very start, allowing them to subtly aid each other during the day. While they cannot speak privately during the day, they may attempt to coordinate through hints and voting behavior.\n- Detectives: Town members with the ability to investigate at night. A detective learns the role of the player they investigate, but only they receive this information. They must decide carefully when and how to reveal their findings to avoid becoming a mafia target.\n- Villagers: Town members with no special abilities. Though they lack private information, their power lies in collective reasoning, pattern recognition, and their ability to influence voting outcomes.\n\nGAME STRUCTURE:\nThe game alternates between night and day phases until one side wins.\n1. Night Phase:\n- Investigation: Each detective chooses one player to investigate and learns their role privately. Investigations are secret and can only be shared by choice in the public discussion.\n- Assassination: One randomly selected mafioso makes the final kill decision for the team. The target must be an active non-mafioso.\n- Outcome: Killed players become inactive immediately and take no further part in discussions, votes, or actions.\n\n2. Day Phase:\n- Discussion: In each discussion round, all active players speak in a randomized order. Each player may send a single public message or remain silent. Messages are addressed to all and attributed by name. No private communication is allowed.\n- Voting: Following discussion, all active players cast a vote to arrest one player. The player with the most votes is arrested. If there is a tie, a tied player is selected randomly.\n- Outcome: Arrested players became inactive, and stop playing the game.\n\nWIN CONDITIONS:\n- Town: eliminate all mafiosos through coordinated voting during the day.\n- Mafia: eliminate all non-mafiosos through a combination of night kills and daytime voting deception.\n\nINFORMATION FLOW:\n- All information revealead to players appears in their #YOUR MEMORY: log, in strict chronological order.\n- Memory is unique to each player, creating asymmetries in what individuals know.\n- Detective investigation results are visible only to that specific detective.\n- All mafiosos know which mafioso was assigned the kill decision at night, and they are all informed of the outcome.\n- There is no private messaging at any point; all communication occurs in public during the day.\n- The total number of each role is known to all players from the start.\n- Deaths and arrests are publicly announced.\n- Voting results are announced and all players see who voted for whom.\n- Voting results are revealed once all active players have cast their vote.\n\n\n#REQUIRED RESPONSE FORMATS\n\nNIGHT ACTION RESPONSE FORMAT:\n- Your night action response MUST START with the name of the player you want to choose.\n- Optional reasoning may follow AFTER a line break.\n- Example: response = 'player_name \n I choose player_name because...'.\n- If you fail to respond in the required format, a random valid choice will be made for you.\n\nDISCUSSION RESPONSE FORMAT:\n- Your discussion response MUST START with your message, enclosed in double quotation marks. \n- Optional reasoning may follow AFTER a line break.\n- Example: response = '\"your message\" \n I am saying this because...'.\n- If you fail to respond in the required format, a message stating that you remained silent will be shared with everyone.\n- Your message will be truncated to a maximum of 200 characters.\n\nVOTING RESPONSE FORMAT: \n- Your voting response MUST START with the name of the player you want to vote for. \n- Optional reasoning may follow AFTER a line break.\n- Example: response = 'player_name \n I am voting for player_name because...'.\n- If you fail to respond in the required format, a random valid vote will be cast for you.\n\n\n#GAME PLAYERS AND COMPOSITION\n- In the game you're playing there are: {composition}.\n- You're {name} and the other players are: {other_players}.\n\n\n#YOUR MEMORY:\n{memory}\n\n\n{action_specific_content}",
      "discussion_suffix": "#DISCUSSION ROUND {round_num}/{discussion_rounds}: \nWhat message do you want to say to everyone?\nYour response must start with your message in double quotation marks, followed by optional reasoning:[/INST]\n",
      "voting_suffix": "#VOTING TIME: \nVote to arrest one player from: {candidates}.\nReply with just a name:[/INST]\n",
      "night_action_suffix": "#NIGHT {round_num}: \nChoose a player to {action} from: {candidates}.\nReply with just a name:[/INST]\n"
    }
  },
  "model_configs": {
    "detective": {
      "type": "xai",
      "model": "grok-3-mini",
      "temperature": 0.7
    },
    "mafioso": {
      "type": "google",
      "model": "gemini-2.5-flash-lite",
      "temperature": 0.7
    },
    "villager": {
      "type": "xai",
      "model": "grok-3-mini",
      "temperature": 0.7
    }
  },
  "game_type": "mini_mafia"
}